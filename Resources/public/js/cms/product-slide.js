define(["gsap/TimelineLite"],function(a){function b(b){function e(){h||(j.seek("end"+g,!0),g++,g>i.length-1&&(g=0),b.one("product-slide-complete",function(){j.seek("start"+g,!0)}))}function f(){h||(j.seek("end"+g),g--,0>g&&(g=i.length-1),b.one("product-slide-complete",function(){j.seek("start"+g,!0)}))}var g=0,h=!1,i=b.find(".slide"),j=new a({onComplete:function(){this.restart()}});i.each(function(e){var f=$(this),i=f.find("> a"),k=f.find("> div"),l=0,m=new a({data:{index:e},onStart:function(){f.show()},onComplete:function(){f.hide(),b.trigger("product-slide-complete")}});m.call(function(){g=this.data.index,h=!0},null,m,l),m.from(i,c,{left:40,right:-40,opacity:0},l),m.from(k,c,{left:-40,right:40,opacity:0},l),l+=c,m.call(function(){h=!1},null,null,l),l+=d,m.call(function(){h=!0},null,m,l),m.to(i,c,{left:-40,right:40,opacity:0},l),m.to(k,c,{left:40,right:-40,opacity:0},l),l+=c,m.call(function(){h=!1},null,null,l),j.add(m).addLabel("start"+e,e*(2*c+d)).addLabel("end"+e,e*(2*c+d)+c+d)}),b.on("click","a.prev-slide",f),b.on("click","a.next-slide",e),j.seek(c)}var c=.33,d=6;return{init:function(a){a.each(function(){b($(this))})}}});