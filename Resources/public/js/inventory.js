define(["jquery","routing","ekyna-product/templates","bootstrap/dialog"],function(a,b,c,d){function e(){for(var a=m.serializeArray(),b={},c=0;c<a.length;c++)b[a[c].name]=a[c].value;return b}function f(){g&&g.abort(),i.empty(),j.show(),k.hide(),g=a.ajax({url:b.generate("ekyna_product_inventory_admin_products"),method:"GET",dataType:"json",data:e()}).done(function(b){j.hide(),void 0===b.products||0===b.products.length?k.show():a.each(b.products,function(b,d){a(c["inventory_line.html.twig"].render(d)).appendTo(i)})})}var g,h,i=a("#inventory_list"),j=a("#inventory_wait"),k=a("#inventory_none"),l=a("#inventory_sort"),m=a('form[name="inventory_search"]'),n=new d({buttons:[{label:"Close",action:function(a){a.close()}}]});m.on("submit",function(a){return a.preventDefault(),a.stopPropagation(),f(),!1}),m.on("reset",function(){f()}),i.on("click","a.stock-units",function(c){c.preventDefault(),c.stopPropagation(),h&&h.abort();var e=a(c.currentTarget).parents("tr").eq(0).data("id");return e?(h=a.ajax({url:b.generate("ekyna_product_inventory_admin_stock_units",{productId:e}),method:"GET",dataType:"html"}).done(function(b){n.setMessage(a(b)),n.setSize(d.SIZE_WIDE),n.open()}),!1):(console.log("Undefined product id."),!1)}),l.on("click","th.sort a",function(b){b.preventDefault(),b.stopPropagation();var c=a(b.currentTarget),d="none";return c.hasClass("none")?d="asc":c.hasClass("asc")&&(d="desc"),l.find("th.sort a").removeClass("asc desc").addClass("none"),"none"!==d?(c.removeClass("none").addClass(d),m.find('input[name="inventory_search[sortBy]"]').val(c.data("by")),m.find('input[name="inventory_search[sortDir]"]').val(d)):(m.find('input[name="inventory_search[sortBy]"]').val(null),m.find('input[name="inventory_search[sortDir]"]').val(null)),m.trigger("submit"),!1}),f()});