define(["jquery","ekyna-number"],function(a){"use strict";return a.fn.saleItemSubjectConfigureWidget=function(){return this.each(function(){function b(){i.find("tr").each(function(){var b=l*(100-a(this).data("percent"))/100;a(this).find("td:last-child").html(b.formatPrice(k.currency))})}function c(){i.find("tr").removeClass("success");var b=parseFloat(g.val()||1),c=l*b;a.each(k.rules,function(a,d){if(b>=d.quantity)return c*=(100-d.percent)/100,i.find('tr[data-quantity="'+d.quantity+'"]').addClass("success"),!1}),j.html(c.formatPrice(k.currency))}function d(){l=parseFloat(k.net_price),f.each(function(){var b=a(this).val();if(0<=b){var c=a(this).find('option[value="'+b+'"]');1===c.length&&0<c.data("price")&&(l+=parseFloat(c.data("price")))}}),b(),c()}var e=a(this),f=e.find("select.sale-item-option"),g=e.find("input.sale-item-quantity"),h=e.find("button.sale-item-toggle-pricing"),i=e.find("table.sale-item-pricing"),j=e.find("span.sale-item-price"),k=j.data("pricing");if(!(k.hasOwnProperty("rules")&&k.hasOwnProperty("net_price")&&k.hasOwnProperty("currency")))return void console.log("Invalid pricing data.");h.on("click",function(){i.is(":visible")?i.hide():i.show()});var l=parseFloat(k.net_price);f.on("change",d),g.on("keyup mouseup change",c),d()}),this},{init:function(a){a.saleItemSubjectConfigureWidget()}}});